(function(){"use strict";var g=function(a){return"gwd-page"==a.tagName.toLowerCase()||"gwd-page"==a.getAttribute("is")},k=function(a){if(g(a))return a;for(;a&&9!=a.nodeType;)if((a=a.parentElement)&&g(a))return a;return null};var m=function(a,b){return setInterval(a,b)};var n=["-ms-","-moz-","-webkit-",""],p=function(a,b,d){for(var c,e,f=0;f<n.length;++f)c=n[f]+b,e=""+d,a.style.setProperty(c,e)};var q=function(a,b,d){var c;d?(c=document.createEvent("CustomEvent"),c.initCustomEvent(a,!0,!0,d)):(c=document.createEvent("Event"),c.initEvent(a,!0,!0));b.dispatchEvent(c);return c},r=function(a,b){var d=function(c){a.removeEventListener("attached",d);b(c)};a.addEventListener("attached",d)};var s=function(a){a=a.trim();return window.Enabler?Enabler.getUrl(a):a};var t=function(a){var b=document.createElement("img","gwd-image");b.setAttribute("source",a);return b},u=function(a){var b=[];if(a){a=a.split(",");for(var d=0;d<a.length;++d)b.push(t(s(a[d])))}return b},v=function(a,b){for(var d=b.length,c=b.splice(0,d),e,f=0;f<d;f++)e=c[f],"frameshown"==e?q(e,a,{id:a.currentIndex}):q(e,a)};document.registerElement&&document.registerElement("gwd-swipegallery",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){this.l=!1;this.c=null;this.e=[];this.b=0;this.q=null;this.w=this.hasAttribute("images");this.i=0;var a=document.createElement("gwd-gesture");a.className="gesture";this.d=a;this.u=this.onTrack_.bind(this);this.t=this.onTrackEnd_.bind(this);this.s=this.onTap_.bind(this);this.v=this.onFramesLoad_.bind(this);this.m=q.bind(null,"firstinteraction",this);
this.p=!1;this.k=[];this.f=v.bind(null,this,this.k);this.r=this.h=0;this.g=null;this.a=0;this.j=[];this.n=this.o=0},enumerable:!0},attachedCallback:{value:function(){this.d.addEventListener("track",this.u,!1);this.d.addEventListener("trackend",this.t,!1);this.d.addEventListener("tap",this.s,!1);this.addEventListener("transitionend",this.f,!1);this.addEventListener("webkitTransitionEnd",this.f,!1);k(this)||"function"!=typeof this.gwdLoad||("function"==typeof this.gwdIsLoaded?this.gwdIsLoaded()||this.gwdLoad():
this.gwdLoad())},enumerable:!0},detachedCallback:{value:function(){this.d.removeEventListener("track",this.u,!1);this.d.removeEventListener("trackend",this.t,!1);this.d.removeEventListener("tap",this.s,!1);this.removeEventListener("transitionend",this.f);this.removeEventListener("webkitTransitionEnd",this.f)},enumerable:!0},attributeChangedCallback:{value:function(a){"images"==a?(this.e=u(this.getAttribute("images")),this.loadFrames_()):this.styleGallery_()},enumerable:!0},styleGallery_:{value:function(){var a=
this.clientWidth,b=this.clientHeight,d=parseInt(this.getAttribute("frame-width"),10)||a,c=parseInt(this.getAttribute("frame-height"),10)||b,e=parseInt(this.getAttribute("offset"),10),e=d+(e||0),b=(b-c)/2;this.n=e;this.h=parseInt(this.getAttribute("transition-duration"),10)||600;this.r=.1*d;for(var f=0,h,l=0;l<this.a;l++)h=this.e[l].style,h.left=f+"px",h.top=b+"px",h.width=d+"px",h.height=c+"px",f+=e;this.i=this.b=0;this.c&&(this.animate_(0,0),a!=d&&(this.c.style.left=(a-d)/2+"px"));a=this.hasAttribute("start-frame")?
parseInt(this.getAttribute("start-frame"),10):1;this.goToFrame(a,"none")},enumerable:!1},gwdIsLoaded:{value:function(){return this.l},enumerable:!0},gwdLoad:{value:function(){if(!this.l&&!this.c){var a;if(this.w)a=u(this.getAttribute("images"));else{a=this.childNodes;for(var b=[],d=0,c=a.length;d<c;d++)a[d].nodeType==Node.ELEMENT_NODE&&b.push(a[d]);a=b}this.e=a;this.loadFrames_()}},enumerable:!0},goToFrame:{value:function(a,b){if(1<=a&&a<=this.a){var d=a-1,c=d*this.n;this.animate_("none"!=b?this.h:
0,-c);this.i=-c;this.b=d;this.q!==a&&(this.k.push("frameshown"),this.q=a,this.j[a]||(this.j[a]=!0,--this.o||this.k.push("allframesviewed")),this.p||this.f())}},enumerable:!0},animate_:{value:function(a,b){this.p=0<a;p(this.c,"transition","all "+a+"ms");p(this.c,"transform","translate3d("+b+"px,0,0)")},enumerable:!1},loadFrames_:{value:function(){for(;this.firstChild;)this.removeChild(this.firstChild);this.c&&this.c.removeEventListener("pageload",this.v,!1);for(var a=this.e,b=document.createElement("div",
"gwd-page"),d,c=0;c<a.length;++c)d=a[c],p(d,"user-select","none"),d.classList.add("frame"),b.appendChild(d);r(b,b.gwdLoad.bind(b));this.c=b;b.className="container";this.c.addEventListener("pageload",this.v,!1);this.a=this.e.length;this.appendChild(b);this.appendChild(this.d)},enumerable:!1},onFramesLoad_:{value:function(a){a.target===this.c&&(this.l=!0,this.o=this.a,this.j=[],this.styleGallery_(),q("allframesloaded",this),this.hasAttribute("autoplay")&&(a=parseInt(this.getAttribute("autoplay-duration"),
10)||3E3,setTimeout(this.rotateOnce.bind(this,a),0)),q("ready",this))},enumerable:!1},rotateOnce:{value:function(a,b){if(this.a&&!this.g){var d=b||"forwards",c=this.currentIndex,e=c;this.g=m(function(){var a=this.a;e=((this.b+("left"==d||"backwards"==d?-1:1))%a+a)%a+1;this.goToFrame(e);e==c&&this.stopRotation_()}.bind(this),(a||this.h)/this.a)}},enumerable:!0},currentIndex:{get:function(){return 0<this.a?this.b+1:void 0},enumerable:!0},getFrame:{value:function(a){return this.e[a-1]},enumerable:!0},
goForwards:{value:function(a){this.goToFrame(this.b+2,a||"slide")},enumerable:!0},goBackwards:{value:function(a){this.goToFrame(this.b,a||"slide")},enumerable:!0},stopRotation_:{value:function(){this.g&&(clearInterval(this.g),this.g=null)},enumerable:!1},onTrack_:{value:function(a){this.m&&(this.m(),this.m=null);this.stopRotation_();a=a.dx;if(0<a&&0===this.b||0>a&&this.b===this.a-1)a-=.7*a;this.animate_(0,this.i+a)},enumerable:!1},onTrackEnd_:{value:function(a){var b=this.a;if(b){a=a.dx;var d=this.b,
c=this.b;Math.abs(a)>this.r&&(c=0>a?c+1:c-1);0>c?c=0:c>=b&&(c=b-1);this.goToFrame(c+1);d!=c&&(0==c?q("reachleftend",this):c==b-1&&q("reachrightend",this))}},enumerable:!1},onTap_:{value:function(){this.stopRotation_();q("frametap",this,{id:this.currentIndex})},enumerable:!1}})});})()
